<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Events</title>
</head>

<body>
    <header class="header">

        <div class="gif">
            <img src="img/H.gif" alt=”H icon”>
        </div>

        <div class="socialmedia">
            <a href="https://www.facebook.com/Huset.Koebenhavn"><img src="img/Facebook.png" alt="Facebook Icon"></a>
            <a href="https://www.instagram.com/husetkbh/"><img src="img/Instagram.png" alt="Instagram Icon"></a>
            <a href="https://twitter.com/HusetKBH"><img src="img/twitter.png" alt="Twitter Icon"></a>
            <a href="https://www.flickr.com/photos/135006755@N04/"><img src="img/flickr.jpg" alt="FLickr Icon"></a>

            <div id="search">
                <h6>Søg</h6>
            </div>



        </div>

        <nav>
            <a href="index.html">Forside</a>
            <a href="events.html">Events</a>
            <div class="dropdown">
                <button class="lokation-dropdown"><a href="lokationer.html">Venues</a></button>
                <div class="dropdown-content">
                    <a href="bastard.html">Bastard Cafe</a>
                    <a href="husetsbiograf.html">Husets Biograf</a>
                    <a href="musikcafeen.html">Musikcaféen</a>
                    <a href="salonk.html">Salon K</a>
                    <a href="stardust.html">Stardust</a>
                </div>
            </div>
            <a href="kontaktos.html">Kontakt</a>
        </nav>
    </header>


    <section id="events">

        <div class="billede">

            <img src="img/events.png" alt="event billede">

        </div>

        <main>
            <div id="content">
                <section id="slidesection" class="filter">

                    <div class="selection">
                        <select class="yellowbutton" name="forma">
                            <option value="#">Vælg Venue</option>
                            <option class="lokationstype" data-type="Alle">Alle</option>
                            <option class="lokationstype" data-type="Bastard Café">Bastard Café</option>
                            <option class="lokationstype" data-type="Husets biograf">Husets Biograf</option>
                            <option class="lokationstype" data-type="Xenon">Xenon</option>

                        </select>

                    </div>
                    <div class="selection">
                        <select class="yellowbutton" name="forma" onchange="location = this.value;">
                            <option value="#">Vælg Genre</option>
                            <option value="#">Film</option>
                            <option value="#">Musik</option>
                            <option value="#">Performance Art</option>
                            <option value="#">Spoken Word</option>
                        </select>
                    </div>
                    <div class="selection">
                        <select class="yellowbutton" name="forma" onchange="location = this.value;">
                            <option value="#">Vælg dato</option>
                            <option value="#">November</option>
                            <option value="#">December</option>
                            <option value="#">Januar</option>
                            <option value="#">Februar</option>
                            <option value="#">Marts</option>
                            <option value="#">April</option>
                            <option value="#">Maj</option>
                            <option value="#">August</option>
                            <option value="#">September</option>
                            <option value="#">Oktober</option>
                        </select>
                    </div>
                    <div class="selection">
                        <select class="yellowbutton" name="forma" onchange="location = this.value;">
                            <option value="#">Vælg Pris</option>
                            <option value="#">0 - 49kr.</option>
                            <option value="#">50 - 99kr.</option>
                            <option value="#">100 - 149kr.</option>
                            <option value="#">150 - 199kr.</option>
                            <option value="#">200 - 249kr.</option>
                            <option value="#">250 - 299kr.</option>
                        </select>
                    </div>
                </section>
                <section id="newest"> </section>
            </div>
        </main>

        <!--
<div class="filter-lokation">
    <label for="toggle">Lokation</label>
    <input type="checkbox" id="toggle" />

    <div class="dropdownbtn">
        <button class="lokationstype" data-type="Alle">Alle</button>
        <button class="lokationstype" data-type="Bastard Café">Bastard Café</button>
        <button class="lokationstype" data-type="Husets biograf">Husets Biograf</button>
        <button class="lokationstype" data-type="Xenon">Xenon</button>
    </div>
</div>
-->
        <main>
            <section class="data-container">
                <template class="data-template">
                    <article class="postListview">

                        <div class="card middle">
                            <div class="front">
                                <div class="slidetop">
                                    <h3 class="data-title"></h3>
                                    <br>
                                    <h3 class="data-pris"> </h3>
                                    <h3 class="data-dato"></h3>
                                    <h3 class="data-tid"></h3>
                                </div>

                                <div class="slidebottom">
                                    <img class="data-billede" src="" alt="">

                                </div>
                            </div>
                            <div class="back">
                                <div class="back-content middle">
                                    <h2 class="data-title"></h2>
                                    <div class="data-id"></div>
                                    <div class="data-text"></div>
                                    <div class="data-pris"></div>
                                    <div class="data-tid"></div>
                                    <h3 class="data-sted"></h3>

                                </div>
                            </div>
                        </div>
                    </article>
                </template>
            </section>
        </main>


        <script>
            document.addEventListener("DOMContentLoaded", getJSON);

            let jsonfile;
            let postTemplate = document.querySelector(".data-template");
            let postContainer = document.querySelector(".data-container");
            let filter = "Alle";

            async function getJSON() {
                let jsonData = await fetch("https://www.rigmordesign.com/kea/huset/wordpress/wp-json/wp/v2/events?per_page=100");
                jsonfile = await jsonData.json();
                visPosts();
            }
            // ------- FILTRERING AF EVENTS ------- //
            document.querySelectorAll(".lokationstype").forEach(knap => {
                knap.addEventListener("click", filtering)
            });

            function filtering() {
                postContainer.textContent = ""
                filter = this.getAttribute("data-type")
                visPosts();
            }

            function visPosts() {
                console.log(jsonfile);

                jsonfile.forEach(post => {

                    if (post.acf.sted == filter || filter == "Alle") {

                        let klon = postTemplate.cloneNode(true).content;
                        klon.querySelector(".data-title").textContent = post.title.rendered;
                        klon.querySelector(".data-text").innerHTML = post.content.rendered;
                        klon.querySelector(".data-pris").textContent = "Pris: " + post.acf.pris + ",-";
                        klon.querySelector(".data-tid").textContent = "Kl. " + post.acf.tid;
                        klon.querySelector(".data-sted").innerHTML = post.acf.sted;
                        klon.querySelector(".data-dato").innerHTML = post.acf.dato;
                        klon.querySelector("img").src = post.acf.billede;
                        klon.querySelector(".postListview").addEventListener("click", () => {
                            window.location.href = "single.html?id=" + post.id;
                        });
                        postContainer.appendChild(klon);
                    }
                })
            }
        </script>


        <footer class="footer">
            <article id="links">
                <div>
                    <h4>Vær med!</h4>
                    <ul>
                        <li> <a href="">DIY</a> </li>
                        <li> <a href="">Ledige stillinger</a> </li>
                        <li> <a href="">Om Huset</a> </li>
                    </ul>
                </div>
            </article>
            <article id="nyhedsbrev">
                <h2>Tilmeld dig vores nyhedsbrev i dag</h2>
                <h3><span>Ja tak,</span> jeg vil meget gerne modtage<br>e-mail fra Huset-KBH med events,<br>inspiration og gode tilbud</h3>
                <form>
                    <input class="textholder" type="email" name="email" value="Skriv din e-mail">
                    <input class="redbutton" type="submit" name="submit" value="Tilmeld mig"> </form>
            </article>
            <article id="links">
                <div>
                    <h4>Kontakt</h4>
                    <ul>
                        <li> <a href="">Presse</a> </li>
                        <li> <a href="">Huset Struktur</a> </li>
                        <li> <a href="">Booking</a> </li>
                        <li> <a href="">Ledige stillinger</a> </li>
                    </ul>
                </div>
            </article>
            <section>
                <h3>Vil du også være først til mølle på de fede events? - </h3>
                <a href="#links">
                    <h2>Klik og tilmeld dig i dag</h2>
                </a>
            </section>
        </footer>
    </section>
</body>

</html>
